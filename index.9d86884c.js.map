{"mappings":"AAEA,MAAMA,EAAO,CACXC,WAAYC,SAASC,cAAc,gBACnCC,kBAAmBF,SAASC,cAAc,aAI5CH,EAAKC,WAAWI,iBAAiB,UAIjC,SAAkBC,GAChBA,EAAMC,iBAoENP,EAAKI,kBAAkBI,UAAY,GAjEnCC,IAAoBC,MAAKC,IACD,IAAnBA,EAAQC,QACTC,QAAQC,IAAI,oBAoBlB,SAA0BH,GACxBE,QAAQC,IAAI,iBAAkBH,EAAQ,GAAGI,gBACzCF,QAAQC,IAAI,OAAYH,EAAQ,GAAGK,UAAU,GAAGC,MAC5CjB,EAACI,kBAAkBc,mBAAmB,YAG5C,SAAoBP,GAClB,OAAOA,EACJQ,KAAI,EAACC,YAAEA,EAAWL,eACjBA,EAAcM,GACdA,EAAEC,WACFA,EAAUC,aACVA,EAAYC,WACZA,EAAUR,UACVA,KAEO,4CAEFD,gFAC2DK,iGAInDC,kFAILC,0EAGeC,EAAaE,MAAM,EAAG,kEAG/BT,EAAU,6CAMzBU,KAAK,G,CApC+CC,CAAWhB,G,CArBjDiB,CAAEjB,EAAQ,G,IAI7B,SAASF,IACP,MAAMoB,EAAcvB,MAAMwB,cAAcC,SAASC,MAAMC,MAEvD,OAAOC,MACL,4FAA4FL,kBAE3FnB,MAAKyB,GAAKA,EAAEC,SACZ1B,MAAK2B,IACJxB,QAAQC,IAAIuB,EAAK1B,QAAQ,IAElB0B,EAAK1B,U","sources":["src/index.js"],"sourcesContent":["import './css/styles.css';\n\nconst refs = {\n  searchForm: document.querySelector('.search-form'),\n  articlesContainer: document.querySelector('.gallery'),\n  // loadMoreBtn: document.querySelector('[data-action=\"load-more\"]'),\n};\n\nrefs.searchForm.addEventListener('submit', onSearch);\n\nlet page = 1;\n\nfunction onSearch(event) {\n  event.preventDefault();\n\n  clearArticlesContainer();\n  fetchMovieSearche().then(results => {\n    if(results.length === 0) {\n      console.log('введите значение');\n    }\n    appendHitsMarkup(results);\n  });\n}\n\nfunction fetchMovieSearche() {\n  const searchQuery = event.currentTarget.elements.query.value;\n\n  return fetch(\n    `https://api.themoviedb.org/3/search/movie?api_key=19011014b9b53c4fd496d37c25f2b619&query=${searchQuery}&page=${page}&genre`\n  )\n    .then(r => r.json())\n    .then(data => {\n      console.log(data.results[0]);\n\n      return data.results;\n    });\n}\n\nfunction appendHitsMarkup(results) {\n  console.log('original_title', results[0].original_title);\n  console.log('Жанр', results[0].genre_ids[0].name);\n  refs.articlesContainer.insertAdjacentHTML('beforeend', createCard(results));\n}\n\nfunction createCard(results) {\n  return results\n    .map(({ poster_path, \n      original_title, \n      id, \n      popularity,\n      release_date,\n      vote_count,\n      genre_ids,\n     }) => {\n      return `\n    <div class=\"photo-card\">\n    <h2> ${original_title} </h2>\n    <img class=\"gallery__image\" src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"movie\"/>\n    <div class=\"info\">\n    \n      <p class=\"info-item\">\n        <b>Id</b>${id}\n      </p>\n      <p class=\"info-item\">\n        <b>Popularity\n        </b>${popularity}\n      </p>\n      <p class=\"info-item\">\n        <b>Release_date</b>${release_date.slice(0, 4)}\n      </p>\n      <p class=\"info-item\">\n      <b>genre</b>${genre_ids[0]}\n      </p>\n    </div>\n  </div>\n  `;\n    })\n    .join('');\n}\n\nfunction clearArticlesContainer() {\n  refs.articlesContainer.innerHTML = '';\n}\n// function clearArticlesContainer() {\n//   refs.articlesContainer.innerHTML = '';\n// }\n\n// const API_KEY = '249f222afb1002186f4d88b2b5418b55';\n// const BASE_URL = 'https://api.themoviedb.org/3';\n// const TREND_URL = `${BASE_URL}/trending/movie/week`;\n// const SEARCH_URL = `${BASE_URL}/search/movie`;\n// const ID_URL = `${BASE_URL}/movie/`;\n\n// export { API_KEY, BASE_URL, TREND_URL, SEARCH_URL, ID_URL };\n\n// import axios from 'axios';\n// import { createGenresFromID, createYear } from '../data/data-combine';\n// import { API_KEY, TREND_URL, SEARCH_URL, ID_URL } from './api-vars';\n\n// export default {\n//   // Получение полной информации о трендах\n//   async getTrendData(page) {\n//     try {\n//       const { data } = await axios.get(\n//         `${TREND_URL}?api_key=${API_KEY}&page=${page}`,\n//       );\n\n//       return data;\n//     } catch (error) {\n//       console.error('Smth wrong with api get full trends' + error);\n//     }\n//   },\n\n//   // Фетч по поисковому запросу\n//   async fetchMovieSearcher(text, page) {\n//     try {\n//       const { data } = await axios.get(\n//         `${SEARCH_URL}?api_key=${API_KEY}&query=${text}&page=${page}`,\n//       );\n\n//       return data;\n//     } catch (error) {\n//       console.error('Smth wrong with api search fetch' + error);\n//     }\n//   },\n\n//   // Фетч фильма по его ID\n//   async getMovieById(id) {\n//     try {\n//       const { data } = await axios.get(`${ID_URL}${id}?api_key=${API_KEY}`);\n\n//       const result = {\n//         ...data,\n//         year: createYear(data),\n//         customGenres: createGenresFromID(data),\n//       };\n\n//       return result;\n//     } catch (error) {\n//       console.error('Smth wrong with api ID fetch' + error);\n//     }\n//   },\n// };\n"],"names":["$1f0dc3b9307be026$var$refs","searchForm","document","querySelector","articlesContainer","addEventListener","event","preventDefault","innerHTML","$1f0dc3b9307be026$var$fetchMovieSearche","then","results","length","console","log","original_title","genre_ids","name","insertAdjacentHTML","map","poster_path","id","popularity","release_date","vote_count","slice","join","$1f0dc3b9307be026$var$createCard","$1f0dc3b9307be026$var$appendHitsMarkup","searchQuery","currentTarget","elements","query","value","fetch","r","json","data"],"version":3,"file":"index.9d86884c.js.map"}